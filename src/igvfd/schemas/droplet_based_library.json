{
    "title": "Droplet Library",
    "$id": "/profiles/droplet_based_library.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "Droplet-based single cell library.",
    "type": "object",
    "required": [
        "lab",
        "samples",
        "library_cardinality"
    ],
    "identifyingProperties": [
        "uuid",
        "aliases"
    ],
    "additionalProperties": false,
    "mixinProperties": [
        {
            "$ref": "mixins.json#/basic_item"
        },
        {
            "$ref": "mixins.json#/attribution"
        },
        {
            "$ref": "mixins.json#/shared_status"
        },
        {
            "$ref": "library.json#/properties"
        }
    ],
    "dependentSchemas": {
        "linked_libraries": {
            "properties": {
                "library_cardinality": {
                    "const": "dual"
                }
            }
        }
    },
    "properties": {
        "schema_version": {
            "default": "1"
        },
        "chemistry_version": {
            "title": "Chemistry Version",
            "description": "Assay type and version of the chemistry used for library preparation.",
            "type": "string",
            "enum": [
                "3' v2",
                "3' v3",
                "3' v3.1",
                "3' v4",
                "5' v1",
                "5' v2",
                "5' v3",
                "Multiome v1",
                "Multiome v2",
                "Flex v1",
                "Flex v2",
                "ATAC v1",
                "ATAC v2",
                "VDJ v1",
                "VDJ v2"
            ]
        },
        "cell_barcode_length": {
            "title": "Cell Barcode Length",
            "description": "Length of cell barcode in base pairs.",
            "type": "integer",
            "enum": [
                16,
                28
            ]
        },
        "umi_length": {
            "title": "UMI Length",
            "description": "Length of Unique Molecular Identifier (UMI) in base pairs.",
            "type": "integer",
            "enum": [
                10,
                12
            ]
        },
        "feature_types": {
            "title": "Feature Types",
            "description": "Types of features captured in the library.",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "type": "string",
                "enum": [
                    "Gene Expression",
                    "Antibody Capture",
                    "CRISPR Guide Capture",
                    "Multiplexing Capture",
                    "ATAC",
                    "BCR",
                    "TCR"
                ]
            }
        },
        "library_cardinality": {
            "title": "Library Cardinality",
            "description": "Cardinality of the library (single or dual).",
            "type": "string",
            "enum": [
                "single",
                "dual"
            ]
        },
        "linked_libraries": {
            "title": "Linked Libraries",
            "description": "Droplet-based libraries that are grouped with this library.",
            "type": "array",
            "minItems": 1,
            "uniqueItems": true,
            "items": {
                "title": "Linked Library",
                "description": "A droplet-based library grouped with this library.",
                "comment": "See droplet_based_library.json for available identifiers. This property is affected by dependencies. Requires library_cardinality to be 'dual'.",
                "type": "string",
                "linkTo": "DropletBasedLibrary"
            }
        }
    },
    "fuzzy_searchable_fields": [
        "aliases",
        "description"
    ],
    "exact_searchable_fields": [
        "@type"
    ],
    "changelog": "/profiles/changelogs/droplet_based_library.md"
}
